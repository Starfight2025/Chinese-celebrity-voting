<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>æ˜Ÿå…‰å¯¹å†³ - æ€§åˆ«/å¹´é¾„/é¢†åŸŸåˆ†åŒº</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
body{font-family:'PingFang SC','Helvetica Neue',Arial,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;color:#333;overflow-x:hidden;}
.container{max-width:1200px;margin:0 auto;padding:20px;}
.header{text-align:center;margin-bottom:30px;color:white;}
.header h1{font-size:3em;margin-bottom:12px;background:linear-gradient(45deg,#fff,#f0f0f0);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;}
.header p{opacity:.95}
.nav{display:flex;justify-content:center;gap:16px;margin-bottom:16px;flex-wrap:wrap}
.nav-btn{background:rgba(255,255,255,.15);border:2px solid rgba(255,255,255,.3);color:#fff;padding:12px 22px;border-radius:26px;cursor:pointer;transition:.3s;backdrop-filter:blur(12px)}
.nav-btn:hover,.nav-btn.active{background:rgba(255,255,255,.25);transform:translateY(-2px);box-shadow:0 10px 26px rgba(0,0,0,.25)}
.filters{display:flex;justify-content:center;gap:12px;flex-wrap:wrap;margin-bottom:28px}
.filter-card{background:rgba(255,255,255,.9);border-radius:14px;padding:10px 14px;box-shadow:0 10px 30px rgba(0,0,0,.12)}
.filter-card label{font-weight:600;margin-right:8px}
.filter-card select{padding:8px 10px;border-radius:8px;border:1px solid #ddd}
.hidden{display:none}
.comparison-section,.leaderboard{background:rgba(255,255,255,.95);border-radius:22px;padding:28px;margin-bottom:26px;box-shadow:0 22px 70px rgba(0,0,0,.14)}
.comparison-section h2,.leaderboard h2{text-align:center;margin-bottom:18px;background:linear-gradient(45deg,#667eea,#764ba2);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.comparison-container{display:flex;justify-content:space-between;align-items:center;gap:30px;max-width:900px;margin:0 auto;}
.star-card{flex:1;text-align:center;padding:24px;border-radius:18px;background:linear-gradient(145deg,#f8f9fa,#fff);box-shadow:0 14px 36px rgba(0,0,0,.12);cursor:pointer;transition:.35s;border:2px solid transparent}
.star-card:hover{transform:translateY(-6px);box-shadow:0 20px 48px rgba(0,0,0,.18)}
.champion-card{border-color:#ffd700}
.challenger-card{border-color:#ff6b6b}
.star-photo{width:160px;height:210px;border-radius:14px;margin:0 auto 16px;display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;box-shadow:0 10px 26px rgba(0,0,0,.2)}
.star-name{font-size:1.6em;font-weight:700;margin-bottom:8px}
.star-info{color:#666;margin-bottom:14px}
.vote-btn{background:linear-gradient(45deg,#667eea,#764ba2);color:#fff;border:none;padding:12px 26px;border-radius:24px;cursor:pointer;font-weight:700;transition:.25s}
.vote-btn:hover{transform:translateY(-2px)}
.vs-divider{font-size:2em;font-weight:800;background:linear-gradient(45deg,#ff6b6b,#ffd700);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}
.ranking-item{display:flex;align-items:center;padding:16px;margin-bottom:12px;background:linear-gradient(145deg,#f8f9fa,#fff);border-radius:12px;box-shadow:0 8px 24px rgba(0,0,0,.08);border-left:5px solid transparent}
.ranking-item:nth-child(1){border-left-color:#ffd700}
.ranking-item:nth-child(2){border-left-color:#c0c0c0}
.ranking-item:nth-child(3){border-left-color:#cd7f32}
.rank-number{min-width:46px;font-size:1.4em;color:#667eea;font-weight:800;margin-right:18px}
.rank-info{flex:1}
.rank-name{font-weight:800}
.rank-score{font-weight:800;color:#667eea}
.battle-news{background:linear-gradient(45deg,#f8f9fa,#e9ecef);border-radius:12px;padding:18px;margin-bottom:12px;border-left:5px solid #667eea}
@media (max-width:768px){
  .comparison-container{flex-direction:column;gap:18px}
  .vs-divider{transform:rotate(90deg)}
}
</style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>ğŸ”¥ æ˜Ÿå…‰å¯¹å†³ ğŸ”¥</h1>
    <p>æŒ‰æ€§åˆ«ã€å¹´é¾„æ®µã€é¢†åŸŸç­›é€‰ï¼Œä¸€é”®å¼€æ‰“ï¼</p>
  </div>

  <div class="nav">
    <button class="nav-btn active" onclick="showSection(event,'arena')">ğŸŸï¸ æ˜æ˜Ÿæ“‚å°</button>
    <button class="nav-btn" onclick="showSection(event,'cp')">ğŸ’• CPå¤§ä½œæˆ˜</button>
    <button class="nav-btn" onclick="showSection(event,'ranking')">ğŸ‘‘ ç‹è€…æ¦œå•</button>
    <button class="nav-btn" onclick="showSection(event,'battle')">ğŸ’¥ æˆ˜å†µæ’­æŠ¥</button>
  </div>

  <!-- ç­›é€‰ï¼šæ€§åˆ« / å¹´é¾„ / é¢†åŸŸ -->
  <div class="filters">
    <div class="filter-card">
      <label for="genderFilter">æ€§åˆ«ï¼š</label>
      <select id="genderFilter" onchange="applyFilters()">
        <option value="all">å…¨éƒ¨</option>
        <option value="male">ç”·</option>
        <option value="female">å¥³</option>
      </select>
    </div>
    <div class="filter-card">
      <label for="ageFilter">å¹´é¾„æ®µï¼š</label>
      <select id="ageFilter" onchange="applyFilters()">
        <option value="all">å…¨éƒ¨</option>
        <option value="gen2000">00åï¼ˆâ‰¤24ï¼‰</option>
        <option value="gen1990">90åï¼ˆ25â€“34ï¼‰</option>
        <option value="gen1980">80åï¼ˆ35â€“44ï¼‰</option>
        <option value="gen1970">70å+ï¼ˆâ‰¥45ï¼‰</option>
      </select>
    </div>
    <div class="filter-card">
      <label for="categoryFilter">é¢†åŸŸï¼š</label>
      <select id="categoryFilter" onchange="applyFilters()">
        <option value="all">å…¨éƒ¨</option>
        <option value="actor">å½±è§†æ¼”å‘˜</option>
        <option value="singer">æ­Œæ‰‹</option>
        <option value="variety">ç»¼è‰ºä¸»æŒ</option>
      </select>
    </div>
  </div>

  <!-- æ˜æ˜Ÿæ“‚å° -->
  <div id="arenaSection" class="comparison-section">
    <h2>ğŸŸï¸ æ˜æ˜Ÿæ“‚å°</h2>
    <div class="comparison-container">
      <div class="star-card champion-card" onclick="voteArena('left')">
        <div class="star-photo" id="arenaLeftPhoto">ğŸ‘‘ æ“‚ä¸»</div>
        <div class="star-name" id="arenaLeftName">æ“‚ä¸»</div>
        <div class="star-info" id="arenaLeftInfo">ç­‰å¾…æŒ‘æˆ˜è€…</div>
        <div class="wins-count" id="leftWins">è¿èƒœ: 0åœº</div>
        <button class="vote-btn">å®ˆæ“‚æˆåŠŸï¼</button>
      </div>
      <div class="vs-divider">âš¡VSâš¡</div>
      <div class="star-card challenger-card" onclick="voteArena('right')">
        <div class="star-photo" id="arenaRightPhoto">âš”ï¸ æŒ‘æˆ˜è€…</div>
        <div class="star-name" id="arenaRightName">æŒ‘æˆ˜è€…</div>
        <div class="star-info" id="arenaRightInfo">æŒ‘æˆ˜è€…ä¿¡æ¯</div>
        <div class="wins-count">æ–°äººæŒ‘æˆ˜</div>
        <button class="vote-btn">å¤ºå–æ“‚ä¸»ï¼</button>
      </div>
    </div>
  </div>

  <!-- CP å¤§ä½œæˆ˜ï¼ˆä¸å—ç­›é€‰å½±å“ï¼‰ -->
  <div id="cpSection" class="comparison-section hidden">
    <h2>ğŸ’• CPå¤§ä½œæˆ˜</h2>
    <div class="comparison-container">
      <div class="star-card champion-card" onclick="voteCp('left')">
        <div class="star-photo" id="cpLeftPhoto">ğŸ’– æ“‚ä¸»CP</div>
        <div class="star-name" id="cpLeftName">æ“‚ä¸»CP</div>
        <div class="star-info" id="cpLeftInfo">æ¥æº</div>
        <div class="wins-count" id="cpLeftWins">è¿èƒœ: 0åœº</div>
        <button class="vote-btn">å®ˆæ“‚æˆåŠŸï¼</button>
      </div>
      <div class="vs-divider">ğŸ’¥VSğŸ’¥</div>
      <div class="star-card challenger-card" onclick="voteCp('right')">
        <div class="star-photo" id="cpRightPhoto">ğŸ’• æŒ‘æˆ˜CP</div>
        <div class="star-name" id="cpRightName">æŒ‘æˆ˜CP</div>
        <div class="star-info" id="cpRightInfo">æ¥æº</div>
        <div class="wins-count">æ–°CPæŒ‘æˆ˜</div>
        <button class="vote-btn">å¤ºå–CPç‹ï¼</button>
      </div>
    </div>
    <div id="cpRankingList" style="margin-top:20px;">
      <h3 style="text-align:center;margin-bottom:14px;color:#667eea;">ğŸ’• CPçƒ­åº¦æ¦œ ğŸ’•</h3>
    </div>
  </div>

  <!-- æ€»æ¦œ -->
  <div id="rankingSection" class="leaderboard hidden">
    <h2>ğŸ‘‘ ç‹è€…äº‰éœ¸æ¦œ</h2>
    <div id="rankingList"></div>
  </div>

  <!-- æˆ˜å†µ -->
  <div id="battleSection" class="leaderboard hidden">
    <h2>ğŸ’¥ æˆ˜å†µæ’­æŠ¥</h2>
    <div id="battleNews"></div>
  </div>
</div>

<script>
/* æ•°æ®ï¼ˆæ€§åˆ«/å¹´é¾„/é¢†åŸŸé½å…¨ï¼‰ */
const starsRaw = [
  // 00å
  {name:'æ˜“çƒŠåƒçº',gender:'male',age:23,category:'actor',score:1250,wins:0},
  {name:'ç‹ä¿Šå‡¯',gender:'male',age:24,category:'singer',score:1180,wins:0},
  {name:'ç‹æº',gender:'male',age:23,category:'singer',score:1150,wins:0},
  {name:'å¼ å­æ«',gender:'female',age:22,category:'actor',score:1120,wins:0},
  {name:'æ¬§é˜³å¨œå¨œ',gender:'female',age:23,category:'variety',score:980,wins:0},
  {name:'å…³æ™“å½¤',gender:'female',age:26,category:'actor',score:1050,wins:0},

  // 90å
  {name:'è‚–æˆ˜',gender:'male',age:32,category:'actor',score:1320,wins:0},
  {name:'ç‹ä¸€åš',gender:'male',age:26,category:'actor',score:1280,wins:0},
  {name:'è¿ªä¸½çƒ­å·´',gender:'female',age:31,category:'actor',score:1200,wins:0},
  {name:'æç°',gender:'male',age:32,category:'actor',score:1050,wins:0},
  {name:'å¤åŠ›å¨œæ‰',gender:'female',age:31,category:'actor',score:980,wins:0},
  {name:'é‚“ç´«æ£‹',gender:'female',age:32,category:'singer',score:1160,wins:0},
  {name:'åæ™¨å®‡',gender:'male',age:33,category:'singer',score:1090,wins:0},
  {name:'å‘¨æ·±',gender:'male',age:31,category:'singer',score:1070,wins:0},
  {name:'æ¯›ä¸æ˜“',gender:'male',age:30,category:'singer',score:1020,wins:0},
  {name:'é¹¿æ™—',gender:'male',age:34,category:'actor',score:1100,wins:0},

  // 80å
  {name:'èµµä¸½é¢–',gender:'female',age:36,category:'actor',score:1180,wins:0},
  {name:'æ¨å¹‚',gender:'female',age:37,category:'actor',score:1150,wins:0},
  {name:'æœ±ä¸€é¾™',gender:'male',age:35,category:'actor',score:1100,wins:0},
  {name:'åˆ˜äº¦è²',gender:'female',age:36,category:'actor',score:1220,wins:0},
  {name:'è–›ä¹‹è°¦',gender:'male',age:40,category:'singer',score:1080,wins:0},
  {name:'è°¢å¨œ',gender:'female',age:42,category:'variety',score:1150,wins:0},

  // 70å+
  {name:'ä½•ç‚…',gender:'male',age:49,category:'variety',score:1300,wins:0},
  {name:'æ²ˆè…¾',gender:'male',age:44,category:'actor',score:1350,wins:0},
  {name:'é»„æ¸¤',gender:'male',age:49,category:'actor',score:1280,wins:0},
  {name:'å­™ä¿ª',gender:'female',age:41,category:'actor',score:1200,wins:0},
];

/* CP æ•°æ®ï¼ˆä¸å—ç­›é€‰ï¼‰ */
const popularCPs = [
  {name:"è‚–æˆ˜ Ã— ç‹ä¸€åš",star1:"è‚–æˆ˜",star2:"ç‹ä¸€åš",source:"ã€Šé™ˆæƒ…ä»¤ã€‹",score:15880,type:"è€½ç¾CP",wins:0},
  {name:"æ¨ç´« Ã— è‚–æˆ˜",star1:"è‚–æˆ˜",star2:"æ¨ç´«",source:"ã€Šä½™ç”Ÿè¯·å¤šæŒ‡æ•™ã€‹",score:12450,type:"è§å¹•CP",wins:0},
  {name:"èµµä¸½é¢– Ã— ç‹ä¸€åš",star1:"ç‹ä¸€åš",star2:"èµµä¸½é¢–",source:"ã€Šæœ‰ç¿¡ã€‹",score:11200,type:"è§å¹•CP",wins:0},
  {name:"è¿ªä¸½çƒ­å·´ Ã— æ¨æ´‹",star1:"æ¨æ´‹",star2:"è¿ªä¸½çƒ­å·´",source:"ã€Šä½ æ˜¯æˆ‘çš„è£è€€ã€‹",score:10800,type:"è§å¹•CP",wins:0},
  {name:"å¤åŠ›å¨œæ‰ Ã— æ˜“çƒŠåƒçº",star1:"æ˜“çƒŠåƒçº",star2:"å¤åŠ›å¨œæ‰",source:"ã€Šé•¿å®‰åäºŒæ—¶è¾°ã€‹",score:9900,type:"è§å¹•CP",wins:0},
  {name:"åˆ˜äº¦è² Ã— æœ±ä¸€é¾™",star1:"æœ±ä¸€é¾™",star2:"åˆ˜äº¦è²",source:"ã€Šæ¢¦åå½•ã€‹",score:9600,type:"è§å¹•CP",wins:0},
  {name:"å…³æ™“å½¤ Ã— é¹¿æ™—",star1:"é¹¿æ™—",star2:"å…³æ™“å½¤",source:"ç°å®æƒ…ä¾£",score:8500,type:"çœŸå®CP",wins:0},
  {name:"æ¨å¹‚ Ã— æç°",star1:"æç°",star2:"æ¨å¹‚",source:"è”æƒ³",score:8200,type:"æ¢¦å¹»CP",wins:0},
  {name:"å¼ å­æ« Ã— æ˜“çƒŠåƒçº",star1:"æ˜“çƒŠåƒçº",star2:"å¼ å­æ«",source:"ã€Šå°‘å¹´çš„ä½ ã€‹",score:7800,type:"è§å¹•CP",wins:0},
  {name:"åæ™¨å®‡ Ã— é‚“ç´«æ£‹",star1:"åæ™¨å®‡",star2:"é‚“ç´«æ£‹",source:"éŸ³ä¹åˆä½œ",score:7200,type:"éŸ³ä¹CP",wins:0},
];

/* è¿‡æ»¤çŠ¶æ€ */
let currentGender='all';
let currentAge='all';
let currentCategory='all';

/* è¿è¡Œæ—¶çŠ¶æ€ */
let stars=[]; // å—ç­›é€‰åçš„æ± 
let currentChampion=null,championWins=0,currentPair=[];
let currentCpChampion=null,cpChampionWins=0,currentCpPair=[];
let battleHistory=[];

/* å·¥å…· */
const GRADIENTS=[
  'linear-gradient(45deg,#ff6b6b,#4ecdc4)',
  'linear-gradient(45deg,#667eea,#764ba2)',
  'linear-gradient(45deg,#f093fb,#f5576c)',
  'linear-gradient(45deg,#4facfe,#00f2fe)',
  'linear-gradient(45deg,#43e97b,#38f9d7)',
  'linear-gradient(45deg,#fa709a,#fee140)'
];
function setRandomBG(id){const el=document.getElementById(id); if(el) el.style.background=GRADIENTS[Math.floor(Math.random()*GRADIENTS.length)];}
function ageGroup(age){ if(age<=24) return 'gen2000'; if(age<=34) return 'gen1990'; if(age<=44) return 'gen1980'; return 'gen1970'; }
function ageGroupLabel(age){ return {gen2000:'00å',gen1990:'90å',gen1980:'80å',gen1970:'70å+'}[ageGroup(age)]; }
function categoryLabel(c){ return {actor:'å½±è§†æ¼”å‘˜',singer:'æ­Œæ‰‹',variety:'ç»¼è‰ºä¸»æŒ'}[c] || c; }

/* è¿‡æ»¤åº”ç”¨ */
function applyFilters(){
  currentGender=document.getElementById('genderFilter').value;
  currentAge=document.getElementById('ageFilter').value;
  currentCategory=document.getElementById('categoryFilter').value;

  stars = starsRaw.filter(s=>{
    const okG = (currentGender==='all') || (s.gender===currentGender);
    const okA = (currentAge==='all') || (ageGroup(s.age)===currentAge);
    const okC = (currentCategory==='all') || (s.category===currentCategory);
    return okG && okA && okC;
  });

  if(stars.length<2){ stars=[...starsRaw]; } // ä¿åº•å¯å¯¹æˆ˜
  // é‡ç½®æ“‚ä¸»ï¼Œé¿å…ç­›é€‰åæ“‚ä¸»ä¸åœ¨æ± å­é‡Œ
  currentChampion=null; championWins=0;

  updateArenaDisplay(); updateRanking();
}

/* æ˜æ˜Ÿæ“‚å°ï¼ˆåŸºäºç­›é€‰æ± ï¼‰ */
function getArenaPair(){
  if(!currentChampion){
    currentChampion = stars[Math.floor(Math.random()*stars.length)];
    championWins=0;
  }
  const pool = stars.filter(s=>s.name!==currentChampion.name);
  const challenger = pool[Math.floor(Math.random()*pool.length)];
  return [currentChampion,challenger];
}
function updateArenaDisplay(){
  currentPair=getArenaPair();
  const [champion,challenger]=currentPair;
  document.getElementById('arenaLeftName').textContent=champion.name;
  document.getElementById('arenaLeftInfo').textContent=
    `${champion.gender==='male'?'ç”·':'å¥³'} Â· ${champion.age}å² Â· ${ageGroupLabel(champion.age)} Â· ${categoryLabel(champion.category)}`;
  document.getElementById('leftWins').textContent=`è¿èƒœ: ${championWins}åœº`;
  document.getElementById('arenaRightName').textContent=challenger.name;
  document.getElementById('arenaRightInfo').textContent=
    `${challenger.gender==='male'?'ç”·':'å¥³'} Â· ${challenger.age}å² Â· ${ageGroupLabel(challenger.age)} Â· ${categoryLabel(challenger.category)}`;
  setRandomBG('arenaLeftPhoto'); setRandomBG('arenaRightPhoto');
}
function voteArena(side){
  const [champion,challenger]=currentPair;
  if(side==='left'){
    championWins++; champion.score+=10; champion.wins++;
    battleHistory.unshift({winner:champion.name,loser:challenger.name,type:'å«å†•æˆåŠŸ',time:new Date().toLocaleString('zh-CN')});
  }else{
    battleHistory.unshift({winner:challenger.name,loser:champion.name,type:'æˆåŠŸå¤ºä½',time:new Date().toLocaleString('zh-CN')});
    currentChampion=challenger; championWins=1; challenger.score+=15; challenger.wins++; champion.score=Math.max(champion.score-5,0);
  }
  updateArenaDisplay(); updateRanking(); updateBattleNews();
}

/* CP æ“‚å°ï¼ˆç‹¬ç«‹ï¼Œä¸å—ç­›é€‰ï¼‰ */
function getCpArenaPair(){
  if(!currentCpChampion){ currentCpChampion=popularCPs[Math.floor(Math.random()*popularCPs.length)]; cpChampionWins=0; }
  const challengers=popularCPs.filter(cp=>cp.name!==currentCpChampion.name);
  const challenger=challengers[Math.floor(Math.random()*challengers.length)];
  return [currentCpChampion,challenger];
}
function updateCpDisplay(){
  currentCpPair=getCpArenaPair();
  const [champion,challenger]=currentCpPair;
  document.getElementById('cpLeftName').textContent=champion.name;
  document.getElementById('cpLeftInfo').textContent=`${champion.source} Â· ${champion.type}`;
  document.getElementById('cpLeftWins').textContent=`è¿èƒœ: ${cpChampionWins}åœº`;
  document.getElementById('cpRightName').textContent=challenger.name;
  document.getElementById('cpRightInfo').textContent=`${challenger.source} Â· ${challenger.type}`;
  setRandomBG('cpLeftPhoto'); setRandomBG('cpRightPhoto');
}
function voteCp(side){
  const [champion,challenger]=currentCpPair;
  if(side==='left'){
    cpChampionWins++; champion.score+=50; champion.wins++;
    battleHistory.unshift({winner:champion.name,loser:challenger.name,type:'CPå«å†•',time:new Date().toLocaleString('zh-CN')});
  }else{
    battleHistory.unshift({winner:challenger.name,loser:champion.name,type:'CPå¤ºä½æˆåŠŸ',time:new Date().toLocaleString('zh-CN')});
    currentCpChampion=challenger; cpChampionWins=1; challenger.score+=80; challenger.wins++; champion.score=Math.max(champion.score-30,0);
  }
  updateCpDisplay(); updateCpRanking(); updateBattleNews();
}

/* æ’è¡Œæ¦œ & æˆ˜å†µï¼ˆå—ç­›é€‰çš„æ˜æ˜Ÿæ± ï¼‰ */
function updateRanking(){
  const sorted=[...stars].sort((a,b)=>b.score-a.score);
  document.getElementById('rankingList').innerHTML = sorted.map((s,i)=>`
    <div class="ranking-item">
      <div class="rank-number">${i+1}</div>
      <div class="rank-info">
        <div class="rank-name">${s.name}</div>
        <div>${s.gender==='male'?'ç”·':'å¥³'} Â· ${s.age}å² Â· ${ageGroupLabel(s.age)} Â· ${categoryLabel(s.category)} Â· èƒœåœº: ${s.wins}</div>
      </div>
      <div class="rank-score">${s.score}</div>
    </div>
  `).join('');
}
function updateCpRanking(){
  const sorted=[...popularCPs].sort((a,b)=>b.score-a.score);
  document.getElementById('cpRankingList').innerHTML =
    '<h3 style="text-align:center;margin-bottom:14px;color:#667eea;">ğŸ’• CPçƒ­åº¦æ¦œ ğŸ’•</h3>' +
    sorted.map((cp,i)=>`
      <div class="ranking-item">
        <div class="rank-number">${i+1}</div>
        <div class="rank-info">
          <div class="rank-name">${cp.name}</div>
          <div>${cp.source} Â· ${cp.type} Â· èƒœåœº: ${cp.wins}</div>
        </div>
        <div class="rank-score">${cp.score}</div>
      </div>
    `).join('');
}
function updateBattleNews(){
  if(battleHistory.length>10) battleHistory = battleHistory.slice(0,10);
  document.getElementById('battleNews').innerHTML = battleHistory.length
    ? battleHistory.map(b=>`
      <div class="battle-news">
        <div style="display:flex;justify-content:space-between;align-items:center;">
          <div><strong>${b.winner}</strong> ${b.type} å‡»è´¥äº† <strong>${b.loser}</strong></div>
          <div style="color:#666;font-size:.9em;">${b.time}</div>
        </div>
      </div>`).join('')
    : '<div class="battle-news">æš‚æ— æˆ˜å†µï¼Œå¿«å»æŠ•ç¥¨å§ï¼</div>';
}

/* è§†å›¾åˆ‡æ¢ */
function showSection(e,section){
  document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
  e.target.classList.add('active');
  ['arena','cp','ranking','battle'].forEach(id=>document.getElementById(id+'Section').classList.add('hidden'));
  document.getElementById(section+'Section').classList.remove('hidden');
  if(section==='arena') updateArenaDisplay();
  else if(section==='cp'){ updateCpDisplay(); updateCpRanking(); }
  else if(section==='ranking') updateRanking();
  else if(section==='battle') updateBattleNews();
}

/* åˆå§‹åŒ– */
document.addEventListener('DOMContentLoaded',()=>{
  applyFilters();     // åˆå§‹åŒ–ç­›é€‰å¹¶æ¸²æŸ“æ“‚å°/æ¦œå•
  updateCpDisplay();  // åˆå§‹åŒ– CP åŒº
  updateCpRanking();
  updateBattleNews();
});
</script>
</body>
</html>
